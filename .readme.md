# FrontEnd Setup

From the FrontEnd folder,

1. Simply run yarn -install to install local dependencies
2. To run the development server, run the command: "yarn run dev-server" from the command line.
3. To run the test suite, run the command: "yarn run test -- --watch" from the command line.

# BackEnd Setup

From the BackEnd folder,

1. Install the local dependencies with the command: pipenv install (must have pipenv installed)
2. Activate the virtual environment with pipenv shell
3. You must have a MySQL database created.
4. You must have a "local_settings.py" file with the following variables defined:
   DB_NAME: <<YOUR_DB_NAME>>
   DB_PASSWORD: <<YOUR_DB_PASSWORD>>
   S_KEY = <<YOUR_DJANGO_SECRET_KEY>>
5. After creating a superuser (python manage.py createsuperuser) and running the server (python manage.py runserver), navigate to the admin page and click on "Applications" under OAUTH2_PROVIDER
    - Click on "Add Application"
    - Enter the SuperUser under the User Field.
    - Change the Client Type to Public
    - Select "Resource owner password-based as the Authorization Grant Type"
    - Make note of the automatically generated Client ID.
6. Within the frontend/src/utils/ folder, create a localAPIConfig.js file
    - Export a single named export called "client_id", with the Client ID generated above.

# Deployment Setup

1. Install awscli using the command "pip install awscli" (or pipenv if you want it in your virtual environment)
2. Use the command "aws configure" to start the setup process for your account
3. Get your access keys by going into our upost AWS account with the username and password provided
4. On the top right corner of the screen click on upsot and open "My Security Credentials"
5. Open Access keys and create a new key
6. Copy these keys to the command prompt
7. create "createsu.py" file in "backend/upost/management/commands"
8. place in the "createsu.py" file: (please change out username and password)
   from django.core.management.base import BaseCommand
   from django.contrib.auth import get_user_model


    class Command(BaseCommand):
        def handle(self, *args, **options):
            User = get_user_model()
            if not User.objects.filter(username="admin").exists():
                User.objects.create_superuser("admin", "admin@admin.com", "admin")

# AWS Deployment Process

1. Use the command "yarn run build:prod" within the React environment (frontend folder) to build your production files
2. Use the command "python manage.py collectstatic" within the Django environment (backend folder) to compile static assets
3. Use the command "pip freeze > requirements.txt" within the Django environment (backend folder) to get python dependencies (if these dependencies have changed)
4. Use the command "eb deploy" within the Django environment (backend folder) to deploy to AWS
5. Once the deploy command has finished use the command "eb open" to open the link to the deployed website
6. follow the backend setup process to add an application to OAUTH2_provider, modify the localAPIConfig file and re-deploy

# Local Deployment Process

Local deployment can be useful to determine server side errors visible through the console.

1. Use the command "yarn run build:local"
2. Use the command "python manage.py collectstatic"
3. Use the command "waitress-serve upost_api.wsgi:application" within the Django environment (backend folder)
